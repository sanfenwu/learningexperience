#第九期
##mysql
**1、mysql内部逻辑图**

![](/image/mysql1.png)  
      
        （1）、连接器：和客户端建立连接，获取权限、维持管理连接
        （2）、查询缓存(默认关闭)：key（sql语句）-value，先在缓存中查没有在查数据库，但是条件苛刻，8.0已经没了
        （3）、解析器/分析器：主要对要执行的sql语句进行语法分析，获得抽象语法树，在判断语法树中的表和字段是否存在        
        （4）、优化器：主要将sql经过解析得到的语法树，分析得到最优的执行计划
        （5）、执行器：根据执行计划，调用存储引擎提供的api操作数据，完成sql的执行
**2、冯丶诺依曼结构**
                    
                  控制器
        输入设备-> 运算器->输出设备
                 存储器
        运算器+控制器组成---中央处理器（cpu）
        两者之间的区别：运算器是获取数据从而进行计算，控制器是进行指挥的
**3、操作系统IO**

        (1)、真正的IO是在操作系统执行的，程序的IO分为：
        IO调用：由进程发起
        IO执行：IO执行是操作系统内核的工作
        (2)、操作系统内核完成IO操作包括两个过程
        准备数据阶段：内核等待IO设备准备好数据
        拷贝数据阶段：将数据从内核缓冲区拷贝到用户进程缓冲区
        (3)、IO过程
           a:应用程序进程向操作系统发起IO调用请求
           b:操作系统准备数据，把IO外部设备的数据，加载到内核缓冲区
           c:操作系统拷贝数据，即将内核缓冲区的数据，拷贝到用户进程缓冲区
**4、IO模型**

    (1)、阻塞IO
    
   ![](/image/zuseIO.png)

    (2)、非阻塞IO
   ![](/image/feizuseIO.png)

    问题：频繁的轮询，导致频繁的系统调用，同样消耗资源
    
    (3)、IO多路复用
    文件描述符（fd），当程序打开或者创建一个文件时，内核向进程返回一个文件描述符
    核心思想：系统提供一系列函数，他们可以同时监控多个fd的操作，任何一个返回内核数据就绪，
    应用程序再发起系统调用。
    a:select/poll遍历fd，随着描述符的增长，效率也会下降
    b:epoll，基于回调不用遍历
    (4)、信号驱动模型
    不再主动询问数据是否就绪，而是向内核发送一个信号，用户进程不在阻塞，当数据准备好后再通过信号
    通知进程，去读取数据
    
    注意：以上在数据从内核复制到应用缓冲的时候都是同步的
    (5)、AIO（异步非阻塞）
    只向内核发送一次请求，就可以完成数据状态询问和数据拷贝的所有操作，并且不用阻塞等待结果
**5、io模型**

 |名称|阻塞|同步（1）/异步（0）|模型名称| 
 |---|---|---|---|
 |BIO|√|1|同步阻塞|
 |NIO|×|1|同步非阻塞|
 |io多路复用|√|1|同步阻塞|
 |信号驱动io|×|1| 同步非阻塞|
 |AIO|×|0|异步非阻塞|
    
    
    

          


               
                
           
       
   

      

    